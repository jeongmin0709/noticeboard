<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{/layout :: setContent(~{this :: title}, ~{this :: link}, ~{this :: content})}">
<header>
    <title th:text="#{title.login}">로그인</title>
    <th:block th:fragment="link"></th:block>
</header>
<body>
<th:block th:fragment="content">
    <div class="container px-lg-5">
        <div class="mx-auto login" style="max-width: 460px">
            <form id="loginForm" th:action="@{/login}" th:method="post">
                <div class="row border-bottom border-secondary mb-4 mx-1 border-4">
                    <div class="px-0 py-2 py-md-3 d-flex justify-content-center justify-content-md-start"><h1 th:text="#{title.login}">로그인</h1>
                    </div>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="username" name="username" type="text" th:placeholder="#{input.placeholder.username}" required/>
                    <label for="username" th:text="#{label.username}">아이디</label>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control" id="password" name="password" type="password" th:placeholder="#{input.placeholder.password}" required/>
                    <label for="password" th:text="#{label.password}">비밀번호</label>
                </div>
                <div class="form-check mb-3 opacity-75">
                    <input class="form-check-input" type="checkbox" name="rememberMe" id="rememberMe">
                    <label class="form-check-label fs-6" for="rememberMe"><small th:text="#{label.rememberMe}">로그인 상태 유지</small></label>
                </div>
                <div class="d-grid mb-3">
                    <div class="fs-6 text-danger mb-3" id="errorMsg"></div>
                    <button class="btn btn-primary fs-5" id="loginBtn" type="submit" th:text="#{button.login}">로그인</button>
                </div>
            </form>
            <ol class="breadcrumb justify-content-center fs-6 opacity-75">
                <li class="breadcrumb-item"><a th:href="@{/find/username}" th:text="#{link.findUsername}">아이디 찾기</a></li>
                <li class="breadcrumb-item"><a th:href="@{/find/password}" th:text="#{link.findPassword}">비밀번호 찾기</a></li>
                <li class="breadcrumb-item"><a th:href="@{/signup}" th:text="#{link.signUp}">회원 가입</a></li>
            </ol>
            <a class="button-social-login mb-2" th:href="@{/oauth2/authorization/naver}" id="naver" type="button" th:text="#{link.login.naver}">네이버 로그인</a>
            <a class="button-social-login mb-2" th:href="@{/oauth2/authorization/kakao}" id="kakao" type="button" th:text="#{link.login.kakao}">카카오 로그인</a>
            <a class="button-social-login mb-2" th:href="@{/oauth2/authorization/google}" id="google" type="button" th:text="#{link.login.gogle}">구글 로그인</a>
        </div>
    </div>
    <script th:inline="javascript">
        $(document).ready(function () {
            let error = [[${error}]];
            if (error) {
                if (error == "1") {
                    $("#errorMsg").text("아이디 또는 비밀번호를 잘못 입력했습니다.");
                } else if (error == "2") {
                    $("#errorMsg").text("아이디 또는 비밀번호를 잘못 입력했습니다.");
                } else if (error == "3") {
                    $("#errorMsg").text("계정이 비활성화 되었습니다.");
                } else if (error == "4") {
                    $("#errorMsg").text("중복 로그인입니다.");
                }
            }
            let username = $("#username");
            let password = $("#password");
            $("#loginBtn").click(function () {
                if (username.val() == "") {
                    username.addClass("is-invalid");
                    $("#errorMsg").text("아이디를 입력해 주세요.");
                } else {
                    username.removeClass("is-invalid");
                    if (password.val() == "") {
                        password.addClass("is-invalid");
                        $("#errorMsg").text("비밀번호를 입력해 주세요");
                    } else password.removeClass("is-invalid");
                }
            })
        });
    </script>
</th:block>
</body>
</html>